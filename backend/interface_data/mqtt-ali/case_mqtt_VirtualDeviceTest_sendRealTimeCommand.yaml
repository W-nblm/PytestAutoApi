case_common:
  allureEpic: 标题：platform-Cloud-Plus微服务权限管理系统_接口文档
  allureFeature: 未分类
  allureStory: 向设备下发实时命令
case_mqtt_VirtualDeviceTest_sendRealTimeCommand_01:
  host: ${{host()}}
  url: /mqtt/VirtualDeviceTest/sendRealTimeCommand
  method: POST
  detail: 未分类 - 向设备下发实时命令 - 成功下发命令
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    devId: virtual_dev_001
    productId: product_type_A
    homeId: home_id_001
    data:
      userId: user_automation
      code: SET_POWER
      value:
        status: true
        brightness: 80
        color: '#FFFFFF'
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 200
    message: 状态码不为200
  - name: 校验响应消息
    jsonpath: $.msg
    type: contains
    value: 成功
    message: 响应消息未包含“成功”
  - name: 校验命令是否成功处理
    jsonpath: $.data.succ
    type: eq
    value: true
    message: 接口返回处理失败
case_mqtt_VirtualDeviceTest_sendRealTimeCommand_02:
  host: ${{host()}}
  url: /mqtt/VirtualDeviceTest/sendRealTimeCommand
  method: POST
  detail: 未分类 - 向设备下发实时命令 - 缺少必填参数devId
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    productId: product_type_A
    homeId: home_id_001
    data:
      userId: user_automation
      code: SET_POWER
      value:
        status: true
  dependence_case: []
  assert:
  - name: 校验接口状态码为参数校验错误
    jsonpath: $.code
    type: eq
    value: 470
    message: 状态码不为470，预期是参数校验失败
  - name: 校验响应消息包含错误信息
    jsonpath: $.msg
    type: contains
    value: 失败
    message: 响应消息未包含预期失败信息
  - name: 校验paramMsg中devId的错误提示（web端使用）
    jsonpath: $.paramMsg.devId
    type: not_eq
    value: null
    message: paramMsg中未找到devId的错误提示
case_mqtt_VirtualDeviceTest_sendRealTimeCommand_03:
  host: ${{host()}}
  url: /mqtt/VirtualDeviceTest/sendRealTimeCommand
  method: POST
  detail: 未分类 - 向设备下发实时命令 - 产品ID不存在或无效
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    devId: virtual_dev_001
    productId: non_existent_product_id
    homeId: home_id_001
    data:
      userId: user_automation
      code: SET_POWER
      value:
        status: true
  dependence_case: []
  assert:
  - name: 校验接口状态码不为成功
    jsonpath: $.code
    type: not_eq
    value: 200
    message: 接口状态码为200，但预期失败
  - name: 校验响应消息包含错误信息
    jsonpath: $.msg
    type: contains
    value: 失败
    message: 响应消息未包含预期失败信息
