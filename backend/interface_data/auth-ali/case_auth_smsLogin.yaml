case_common:
  allureEpic: 标题：platform-Cloud-Plus微服务权限管理系统_接口文档
  allureFeature: 未分类
  allureStory: 短信登录
case_auth_smsLogin_01:
  host: ${{host()}}
  url: /auth/smsLogin
  method: POST
  detail: 正向场景-短信登录成功
  headers:
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    phonenumber: '13812345678'
    smsCode: '654321'
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 200
    message: 状态码不为200
  - name: 校验响应消息
    jsonpath: $.msg
    type: contains
    value: 成功
    message: 响应消息不包含"成功"
  - name: 校验响应数据不为空
    jsonpath: $.data
    type: not_eq
    value: null
    message: 响应数据为空
  - name: 校验响应数据中包含token
    jsonpath: $.data.token
    type: not_eq
    value: null
    message: 响应数据中未包含token
  extract:
    app_token: $.data.token
case_auth_smsLogin_02:
  host: ${{host()}}
  url: /auth/smsLogin
  method: POST
  detail: 异常场景-缺少手机号参数
  headers:
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    smsCode: '654321'
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: not_eq
    value: 200
    message: 状态码不应为200
  - name: 校验响应消息包含错误信息
    jsonpath: $.msg
    type: contains
    value: 参数错误
    message: 响应消息不包含"参数错误"
  - name: 校验paramMsg提示手机号必填
    jsonpath: $.paramMsg.phonenumber
    type: contains
    value: 不能为空
    message: 手机号参数校验提示错误
case_auth_smsLogin_03:
  host: ${{host()}}
  url: /auth/smsLogin
  method: POST
  detail: 异常场景-缺少短信验证码参数
  headers:
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    phonenumber: '13812345678'
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: not_eq
    value: 200
    message: 状态码不应为200
  - name: 校验响应消息包含错误信息
    jsonpath: $.msg
    type: contains
    value: 参数错误
    message: 响应消息不包含"参数错误"
  - name: 校验paramMsg提示短信code必填
    jsonpath: $.paramMsg.smsCode
    type: contains
    value: 不能为空
    message: 短信code参数校验提示错误
case_auth_smsLogin_04:
  host: ${{host()}}
  url: /auth/smsLogin
  method: POST
  detail: 异常场景-手机号格式错误
  headers:
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    phonenumber: '123'
    smsCode: '654321'
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: not_eq
    value: 200
    message: 状态码不应为200
  - name: 校验响应消息包含格式错误信息
    jsonpath: $.msg
    type: contains
    value: 格式错误
    message: 响应消息不包含"格式错误"
  - name: 校验paramMsg提示手机号格式不正确
    jsonpath: $.paramMsg.phonenumber
    type: contains
    value: 格式不正确
    message: 手机号参数校验提示格式不正确
case_auth_smsLogin_05:
  host: ${{host()}}
  url: /auth/smsLogin
  method: POST
  detail: 异常场景-短信验证码错误或已失效
  headers:
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    phonenumber: '13812345678'
    smsCode: '000000'
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: not_eq
    value: 200
    message: 状态码不应为200
  - name: 校验响应消息包含验证码错误信息
    jsonpath: $.msg
    type: contains
    value: 验证码
    message: 响应消息不包含"验证码"相关错误
