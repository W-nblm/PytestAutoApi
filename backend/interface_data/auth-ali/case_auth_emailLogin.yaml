case_common:
  allureEpic: platform-Cloud-Plus微服务权限管理系统_接口文档
  allureFeature: 认证授权
  allureStory: 邮件登录
case_auth_emailLogin_01:
  host: ${{host()}}
  url: /auth/emailLogin
  method: POST
  detail: 邮件登录 - 成功登录
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    email: test_user_01@example.com
    emailCode: '123456'
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 200
    message: 状态码不为200
  - name: 校验响应消息包含"成功"
    jsonpath: $.msg
    type: contains
    value: 成功
    message: 响应消息未包含"成功"
  - name: 校验errCode为空，表示无业务错误
    jsonpath: $.errCode
    type: eq
    value: null
    message: 业务错误码不为空，预期成功登录时不应有业务错误码
  - name: 校验响应数据不为空，表示登录成功返回了数据（如token）
    jsonpath: $.data
    type: not_eq
    value: null
    message: 成功登录后，data字段不应为空
case_auth_emailLogin_02:
  host: ${{host()}}
  url: /auth/emailLogin
  method: POST
  detail: 邮件登录 - 缺少email参数
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    emailCode: '654321'
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 200
    message: 状态码不为200
  - name: 校验errCode不为空，表示有业务错误
    jsonpath: $.errCode
    type: not_eq
    value: null
    message: 业务错误码为空，但预期缺少参数时应有错误
  - name: 校验paramMsg中存在email参数的错误提示
    jsonpath: $.paramMsg.email
    type: not_eq
    value: null
    message: 缺少email参数时，paramMsg.email字段应存在错误提示
case_auth_emailLogin_03:
  host: ${{host()}}
  url: /auth/emailLogin
  method: POST
  detail: 邮件登录 - 缺少emailCode参数
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    email: test_user_02@example.com
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 200
    message: 状态码不为200
  - name: 校验errCode不为空，表示有业务错误
    jsonpath: $.errCode
    type: not_eq
    value: null
    message: 业务错误码为空，但预期缺少参数时应有错误
  - name: 校验paramMsg中存在emailCode参数的错误提示
    jsonpath: $.paramMsg.emailCode
    type: not_eq
    value: null
    message: 缺少emailCode参数时，paramMsg.emailCode字段应存在错误提示
case_auth_emailLogin_04:
  host: ${{host()}}
  url: /auth/emailLogin
  method: POST
  detail: 邮件登录 - email格式不正确
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    email: invalid-email-format
    emailCode: '123456'
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 200
    message: 状态码不为200
  - name: 校验errCode不为空，表示有业务错误
    jsonpath: $.errCode
    type: not_eq
    value: null
    message: 业务错误码为空，但预期email格式不正确时应有错误
  - name: 校验paramMsg中存在email格式错误提示
    jsonpath: $.paramMsg.email
    type: not_eq
    value: null
    message: email格式不正确时，paramMsg.email字段应存在错误提示
case_auth_emailLogin_05:
  host: ${{host()}}
  url: /auth/emailLogin
  method: POST
  detail: 邮件登录 - email为空字符串
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    email: ''
    emailCode: '123456'
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 200
    message: 状态码不为200
  - name: 校验errCode不为空，表示有业务错误
    jsonpath: $.errCode
    type: not_eq
    value: null
    message: 业务错误码为空，但预期email为空字符串时应有错误
  - name: 校验paramMsg中存在email错误提示
    jsonpath: $.paramMsg.email
    type: not_eq
    value: null
    message: email为空字符串时，paramMsg.email字段应存在错误提示
case_auth_emailLogin_06:
  host: ${{host()}}
  url: /auth/emailLogin
  method: POST
  detail: 邮件登录 - emailCode为空字符串
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    email: test_user_03@example.com
    emailCode: ''
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 200
    message: 状态码不为200
  - name: 校验errCode不为空，表示有业务错误
    jsonpath: $.errCode
    type: not_eq
    value: null
    message: 业务错误码为空，但预期emailCode为空字符串时应有错误
  - name: 校验paramMsg中存在emailCode错误提示
    jsonpath: $.paramMsg.emailCode
    type: not_eq
    value: null
    message: emailCode为空字符串时，paramMsg.emailCode字段应存在错误提示
case_auth_emailLogin_07:
  host: ${{host()}}
  url: /auth/emailLogin
  method: POST
  detail: 邮件登录 - 验证码不正确或过期
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    email: test_user_04@example.com
    emailCode: '999999'
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 200
    message: 状态码不为200
  - name: 校验errCode不为空，表示有业务错误
    jsonpath: $.errCode
    type: not_eq
    value: null
    message: 业务错误码为空，但预期验证码错误时应有错误
  - name: 校验响应消息包含"验证码错误"或"无效"等关键词
    jsonpath: $.msg
    type: contains
    value: 验证码
    message: 响应消息未提示验证码相关错误
  - name: 校验paramMsg为空，表示非参数格式错误
    jsonpath: $.paramMsg
    type: eq
    value: null
    message: 预期验证码错误属于业务逻辑错误，paramMsg应为空
case_auth_emailLogin_08:
  host: ${{host()}}
  url: /auth/emailLogin
  method: POST
  detail: 邮件登录 - 邮箱未注册/不存在
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    email: non_existent_email@example.com
    emailCode: '123456'
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 200
    message: 状态码不为200
  - name: 校验errCode不为空，表示有业务错误
    jsonpath: $.errCode
    type: not_eq
    value: null
    message: 业务错误码为空，但预期邮箱不存在时应有错误
  - name: 校验响应消息包含"邮箱不存在"或"未注册"等关键词
    jsonpath: $.msg
    type: contains
    value: 邮箱
    message: 响应消息未提示邮箱不存在或未注册
  - name: 校验paramMsg为空，表示非参数格式错误
    jsonpath: $.paramMsg
    type: eq
    value: null
    message: 预期邮箱不存在属于业务逻辑错误，paramMsg应为空
