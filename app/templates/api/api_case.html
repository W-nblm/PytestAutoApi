<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>AI Test Platform</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body { padding: 2rem; }
        .card { margin-top: 1rem; }
        pre { background: #f8f9fa; padding: 1rem; border-radius: 6px; }
    </style>
</head>
<body>

<div class="container">
    <h2 class="mb-4">ğŸ¤– AI è‡ªåŠ¨åŒ–æµ‹è¯•å¹³å°</h2>

    <!-- ä¸Šä¼ åŒºåŸŸ -->
    <div class="card">
        <div class="card-header">ä¸Šä¼  OpenAPI æ–‡ä»¶</div>
        <div class="card-body">
            <input type="file" id="fileInput" class="form-control mb-2">
            <button class="btn btn-primary" onclick="uploadFile()">ä¸Šä¼ å¹¶è§£æ</button>
            <pre id="uploadResult"></pre>
        </div>
    </div>

    <!-- ç”¨ä¾‹ç”Ÿæˆ -->
    <div class="card">
        <div class="card-header">ç”¨ä¾‹ç”Ÿæˆ</div>
        <div class="card-body">
            <button class="btn btn-success" onclick="generateCases()">ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹</button>
            <pre id="caseResult"></pre>
        </div>
    </div>

    <!-- æµ‹è¯•æ‰§è¡Œ -->
    <div class="card">
        <div class="card-header">æ‰§è¡Œæµ‹è¯•</div>
        <div class="card-body">
            <button class="btn btn-danger" onclick="runTests()">æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹</button>
            <pre id="runResult"></pre>
        </div>
    </div>

</div>

<script>
async function uploadFile() {
    const fileInput = document.getElementById("fileInput");
    const file = fileInput.files[0];
    if (!file) { alert("è¯·é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶"); return; }

    const formData = new FormData();
    formData.append("file", file);
    const res = await fetch("/api/upload", { method: "POST", body: formData });
    const data = await res.json();
    document.getElementById("uploadResult").textContent = JSON.stringify(data, null, 2);
}

async function generateCases() {
    const res = await fetch("/api/generate", { method: "POST" });
    const data = await res.json();
    document.getElementById("caseResult").textContent = JSON.stringify(data, null, 2);
}

async function runTests() {
    const res = await fetch("/api/execute", { method: "POST" });
    const data = await res.json();
    document.getElementById("runResult").textContent = JSON.stringify(data, null, 2);
}
</script>

</body>
</html>
