case_common:
  allureEpic: 标题：platform-Cloud-Plus微服务权限管理系统_接口文档
  allureFeature: 未分类
  allureStory: 用户注册
case_auth_register_01_positive_success:
  host: ${{host()}}
  url: /auth/register
  method: POST
  detail: 用户注册 - 成功注册新用户 (正向场景)
  headers:
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    username: test_user_positive_${{random_string(6)}}
    password: P@ssw0rd123!
    email: positive_test_${{random_string(4)}}@example.com
    phone: 138${{random_int(10000000,99999999)}}
    captcha: 1234
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 200
    message: 状态码不为200
  - name: 校验响应消息
    jsonpath: $.msg
    type: contains
    value: 成功
    message: 响应消息不包含"成功"
case_auth_register_02_negative_missing_username:
  host: ${{host()}}
  url: /auth/register
  method: POST
  detail: 用户注册 - 失败 (缺少用户名)
  headers:
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    password: P@ssw0rd123!
    email: missing_username_test@example.com
    phone: 13800138001
    captcha: 1234
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 400
    message: 状态码不为400
  - name: 校验响应消息
    jsonpath: $.msg
    type: contains
    value: 用户名不能为空
    message: 响应消息未提示用户名缺失
case_auth_register_03_negative_invalid_password_format:
  host: ${{host()}}
  url: /auth/register
  method: POST
  detail: 用户注册 - 失败 (密码格式错误 - 过短)
  headers:
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    username: test_user_invalid_pwd_${{random_string(6)}}
    password: short
    email: invalid_pwd_test@example.com
    phone: 13800138002
    captcha: 1234
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 400
    message: 状态码不为400
  - name: 校验响应消息
    jsonpath: $.msg
    type: contains
    value: 密码长度不符合要求
    message: 响应消息未提示密码长度或格式错误
case_auth_register_04_negative_invalid_email_format:
  host: ${{host()}}
  url: /auth/register
  method: POST
  detail: 用户注册 - 失败 (邮箱格式不正确)
  headers:
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    username: test_user_invalid_email_${{random_string(6)}}
    password: P@ssw0rd123!
    email: invalid-email-format
    phone: 13800138003
    captcha: 1234
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 400
    message: 状态码不为400
  - name: 校验响应消息
    jsonpath: $.msg
    type: contains
    value: 邮箱格式不正确
    message: 响应消息未提示邮箱格式不正确
case_auth_register_05_prepare_duplicate_user:
  host: ${{host()}}
  url: /auth/register
  method: POST
  detail: 用户注册 - 准备数据 (预注册用户用于重复注册测试)
  headers:
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    username: test_user_for_duplicate_reg
    password: P@ssw0rd123!
    email: prepare_duplicate@example.com
    phone: 138${{random_int(10000000,99999999)}}
    captcha: 1234
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 200
    message: 状态码不为200 (准备数据失败)
  - name: 校验响应消息
    jsonpath: $.msg
    type: contains
    value: 成功
    message: 响应消息不包含"成功" (准备数据失败)
case_auth_register_06_negative_duplicate_username:
  host: ${{host()}}
  url: /auth/register
  method: POST
  detail: 用户注册 - 失败 (用户名已存在)
  headers:
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    username: test_user_for_duplicate_reg
    password: P@ssw0rd123!
    email: duplicate_test@example.com
    phone: 13800138004
    captcha: 1234
  dependence_case:
  - case: case_auth_register_05_prepare_duplicate_user
    export: {}
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 409
    message: 状态码不为409 (用户名重复)
  - name: 校验响应消息
    jsonpath: $.msg
    type: contains
    value: 用户名已存在
    message: 响应消息未提示用户名已存在
