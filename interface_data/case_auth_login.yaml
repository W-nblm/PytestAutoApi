case_common:
  allureEpic: platform-Cloud-Plus微服务权限管理系统_接口文档
  allureFeature: 认证模块
  allureStory: 登录方法
case_auth_login_01_success:
  host: ${{host()}}
  url: /auth/login
  method: POST
  detail: 正向场景 - 登录方法：有效用户名密码
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    username: testuser
    password: password123
  dependence_case:
  - name: 缓存登录token
    jsonpath: $.data.token
    type: cache
    key: app_token
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 200
    message: 登录成功时状态码不为200
  - name: 校验响应消息
    jsonpath: $.msg
    type: contains
    value: 成功
    message: 登录成功时响应消息不包含"成功"
  - name: 校验响应数据中是否存在token
    jsonpath: $.data.token
    type: not_eq
    value: null
    message: 登录成功时未返回token
case_auth_login_02_invalid_credentials:
  host: ${{host()}}
  url: /auth/login
  method: POST
  detail: 异常场景 - 登录方法：无效用户名或密码
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    username: invaliduser
    password: wrongpassword
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: not_eq
    value: 200
    message: 登录失败时状态码不应为200
  - name: 校验响应消息包含错误信息
    jsonpath: $.msg
    type: contains
    value: 失败
    message: 登录失败时响应消息未包含预期的错误信息
  - name: 校验响应数据中不返回token
    jsonpath: $.data.token
    type: eq
    value: null
    message: 登录失败时不应返回token
case_auth_login_03_missing_username:
  host: ${{host()}}
  url: /auth/login
  method: POST
  detail: 异常场景 - 登录方法：请求体缺少用户名
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    password: password123
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: not_eq
    value: 200
    message: 缺少用户名时状态码不应为200
  - name: 校验响应消息包含错误信息
    jsonpath: $.msg
    type: contains
    value: 缺少参数
    message: 缺少用户名时响应消息未包含预期的错误信息
case_auth_login_04_missing_password:
  host: ${{host()}}
  url: /auth/login
  method: POST
  detail: 异常场景 - 登录方法：请求体缺少密码
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    username: testuser
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: not_eq
    value: 200
    message: 缺少密码时状态码不应为200
  - name: 校验响应消息包含错误信息
    jsonpath: $.msg
    type: contains
    value: 缺少参数
    message: 缺少密码时响应消息未包含预期的错误信息
case_auth_login_05_empty_body:
  host: ${{host()}}
  url: /auth/login
  method: POST
  detail: 异常场景 - 登录方法：请求体为空
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data: {}
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: not_eq
    value: 200
    message: 请求体为空时状态码不应为200
  - name: 校验响应消息包含错误信息
    jsonpath: $.msg
    type: contains
    value: 缺少参数
    message: 请求体为空时响应消息未包含预期的错误信息
