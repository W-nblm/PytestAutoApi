case_common:
  allureEpic: 标题：platform-Cloud-Plus微服务权限管理系统_接口文档
  allureFeature: 未分类
  allureStory: 短信登录
case_auth_smsLogin_01_success:
  host: ${{host()}}
  url: /auth/smsLogin
  method: POST
  detail: 短信登录 - 成功
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    phoneNumber: 13800001234
    smsCode: 123456
  dependence_case: []
  assert:
  - name: 校验接口状态码
    jsonpath: $.code
    type: eq
    value: 200
    message: 状态码不为200
  - name: 校验响应消息
    jsonpath: $.msg
    type: contains
    value: 成功
    message: 响应消息不包含“成功”
  - name: 校验是否返回了token
    jsonpath: $.data.token
    type: not_eq
    value: null
    message: 登录成功但未返回token
  - name: 校验返回的token不为空
    jsonpath: $.data.token
    type: not_eq
    value: ''
    message: 登录成功但返回的token为空
case_auth_smsLogin_02_invalid_smsCode:
  host: ${{host()}}
  url: /auth/smsLogin
  method: POST
  detail: 短信登录 - 验证码错误或过期
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    phoneNumber: 13800001234
    smsCode: 0
  dependence_case: []
  assert:
  - name: 校验接口状态码非200
    jsonpath: $.code
    type: not_eq
    value: 200
    message: 错误验证码场景，状态码应非200
  - name: 校验响应消息包含错误信息
    jsonpath: $.msg
    type: contains
    value: 验证码
    message: 响应消息未包含验证码错误信息
case_auth_smsLogin_03_unregistered_phoneNumber:
  host: ${{host()}}
  url: /auth/smsLogin
  method: POST
  detail: 短信登录 - 手机号未注册
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    phoneNumber: 13999999999
    smsCode: 111111
  dependence_case: []
  assert:
  - name: 校验接口状态码非200
    jsonpath: $.code
    type: not_eq
    value: 200
    message: 未注册手机号场景，状态码应非200
  - name: 校验响应消息包含手机号未注册信息
    jsonpath: $.msg
    type: contains
    value: 未注册
    message: 响应消息未包含手机号未注册信息
case_auth_smsLogin_04_missing_parameters:
  host: ${{host()}}
  url: /auth/smsLogin
  method: POST
  detail: 短信登录 - 缺少手机号
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    smsCode: 123456
  dependence_case: []
  assert:
  - name: 校验接口状态码非200
    jsonpath: $.code
    type: not_eq
    value: 200
    message: 缺少参数场景，状态码应非200
  - name: 校验响应消息包含参数缺失信息
    jsonpath: $.msg
    type: contains
    value: 参数
    message: 响应消息未包含参数缺失错误信息
case_auth_smsLogin_05_invalid_phoneNumber_format:
  host: ${{host()}}
  url: /auth/smsLogin
  method: POST
  detail: 短信登录 - 手机号格式不正确
  headers:
    Authorization: $cache{app_token}
    Content-Language: zh_CN
    App-Source: WObird
  requestType: json
  data:
    phoneNumber: 123
    smsCode: 123456
  dependence_case: []
  assert:
  - name: 校验接口状态码非200
    jsonpath: $.code
    type: not_eq
    value: 200
    message: 手机号格式错误场景，状态码应非200
  - name: 校验响应消息包含手机号格式错误信息
    jsonpath: $.msg
    type: contains
    value: 手机号格式
    message: 响应消息未包含手机号格式错误信息
